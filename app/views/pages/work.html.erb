<section>

  <div class="flex items-center justify-between mb-6">
    <h2 class="text-2xl font-bold text-gray-900">My Work</h2>
    <%= link_to resume_download_path,
      class: "inline-flex items-center px-4 py-2 bg-blue-900 text-white rounded-lg shadow hover:bg-blue-800 transition",
      target: "_blank",
      data: { turbo: false } do %>
      <svg class="w-4 h-4 mr-2" fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
        <path d="M5 20h14v-2H5v2zm7-18v12l4-4h-3V4h-2v6H8l4 4z"/>
      </svg>
      Download Resume
    <% end %>
  </div>

  <div class="space-y-8">
    <% @work_experiences.each do |job| %>
      <div class="p-6 bg-white shadow rounded-xl">
        <h2 class="text-xl font-bold"><%= job["role"] %> at <%= job["company"] %></h2>
        <p class="text-gray-600"><%= job["timeframe"] %></p>
        <p class="mt-2"><%= job["summary"] %></p>

        <ul class="mt-4 space-y-2">
          <% job["projects"].each do |project| %>
            <li>
              <strong><%= project["name"] %>:</strong>
              <span class="text-gray-700"><%= project["description"] %></span>
              <% if project["tech"] %>
                <div class="mb-6 mt-2">
                  <div class="flex flex-wrap gap-3">
                    <% project["tech"]&.each do |tech| %>
                      <span class="px-3 py-1 bg-gray-200 rounded-full text-sm"><%= tech %></span>
                    <% end %>
                  </div>
                </div>
              <% else %>
                <div class="mb-6"></div>
              <% end %>
            </li>
          <% end %>
        </ul>
      </div>
    <% end %>
  </div>
</section>
